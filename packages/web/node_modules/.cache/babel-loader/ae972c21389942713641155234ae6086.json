{"ast":null,"code":"import _slicedToArray from\"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState}from'react';import{Button,Form}from'antd';import TagInput from'../../components/TagInput';import{useForm}from'antd/es/form/Form';import{addInputList,changeInputList,deleteInputList}from'../../../../utils/tool/editTool';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";var TagConfigForm=function TagConfigForm(props){var _initVal$tagList;var _useForm=useForm(),_useForm2=_slicedToArray(_useForm,1),form=_useForm2[0];var EDIT_SUBSELECTED=true;var _useState=useState({tagList:[{key:'类别2',value:'class2',isMulti:false,subSelected:[{key:'选项2',value:'option2',isDefault:true},{key:'选项2-2',value:'option2-2',isDefault:false}]}]}),_useState2=_slicedToArray(_useState,2),initVal=_useState2[0],setInitVal=_useState2[1];useMemo(function(){if(props){var initV={// @ts-ignore\ntagList:props.tagList&&props.tagList.length>0?// @ts-ignore\nprops.tagList:[{key:'类别2',value:'class2',isMulti:true,subSelected:[{key:'选项2',value:'option2',isDefault:true},{key:'选项2-2',value:'option2-2',isDefault:false}]}]};setInitVal(initV);}},[]);// 更改标签工具里面的对应值\nvar changeInputInfo=function changeInputInfo(e,target,index,subIndex){var _e$target,_e$target$value;// 这个是什么情况才有 ？\nif((e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:(_e$target$value=_e$target.value)===null||_e$target$value===void 0?void 0:_e$target$value.indexOf('@'))>-1&&!['isMulti','isDefault'].includes(target)){return;}var tagList=form===null||form===void 0?void 0:form.getFieldValue('tagList');var newTagList=changeInputList(e,target,tagList,index,subIndex);form===null||form===void 0?void 0:form.setFieldsValue({tagList:newTagList});setInitVal({tagList:newTagList});};// add inputList\nvar addInputInfo=function addInputInfo(i){var tagList=form===null||form===void 0?void 0:form.getFieldValue('tagList');form===null||form===void 0?void 0:form.setFieldsValue({tagList:addInputList(tagList,EDIT_SUBSELECTED,i,{isMulti:true,lang:'cn'})});setInitVal({tagList:addInputList(tagList,EDIT_SUBSELECTED,i,{isMulti:true,lang:'cn'})});formSubmitThrottle();};// 删除对应输入\nvar deleteInputInfo=function deleteInputInfo(i,subIndex){var tagList=form===null||form===void 0?void 0:form.getFieldValue('tagList');var newTagList=deleteInputList(tagList,i,subIndex);form===null||form===void 0?void 0:form.setFieldsValue({tagList:newTagList});setInitVal({tagList:newTagList});formSubmitThrottle();};// @ts-ignore\nvar formSubmitThrottle=window.throttle(function(){form.submit();},1);// 表单提交处理\n// useEffect(() => {\n//   formSubmitThrottle();\n// }, [initVal]);\nvar children=props.children;return _jsxs(\"div\",{className:\"selectedMain\",style:{paddingLeft:24},children:[_jsx(Form,{name:props.name,form:form,onBlur:formSubmitThrottle,children:_jsxs(Form.Item,{label:\"\",name:\"tagList\",shouldUpdate:true,initialValue:initVal.tagList,children:[(_initVal$tagList=initVal.tagList)===null||_initVal$tagList===void 0?void 0:_initVal$tagList.map(function(info,i){return _jsx(TagInput,{inputInfo:info,isAllReadOnly:false,changeInputInfo:changeInputInfo,addInputInfo:addInputInfo,deleteInputInfo:deleteInputInfo,inputIndex:i},info.value);}),_jsx(Button,{type:\"primary\",style:{marginTop:16,borderRadius:4},onClick:function onClick(){return addInputInfo();},ghost:true,children:\"\\u65B0\\u5EFA\"})]})}),children]});};export default TagConfigForm;","map":null,"metadata":{},"sourceType":"module"}