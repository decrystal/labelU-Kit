{"ast":null,"code":"import _slicedToArray from\"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import AnnotationOperation from'@label-u/components';import'./index.less';// import { fileList as mockFileList, videoList } from '../../mock/annotationMock';\nimport YamlConfig from'./yamlConfig';import{shallowEqual,useSelector}from'react-redux';import{Button,Steps,Tabs}from'antd';import EmptyConfigImg from'../../img/annotationCommon/emptyConfig.png';import ConfigTemplate from'./configTemplate/index';import FormConfig from'./formConfig';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";import{Fragment as _Fragment}from\"@emotion/react/jsx-runtime\";var Step=Steps.Step;var AnnotationConfig=function AnnotationConfig(){var _useSelector=useSelector(function(state){return state.toolsConfig;},shallowEqual),tools=_useSelector.tools,tagList=_useSelector.tagList,attribute=_useSelector.attribute,textConfig=_useSelector.textConfig,fileInfo=_useSelector.fileInfo,commonAttributeConfigurable=_useSelector.commonAttributeConfigurable;var _useState=useState(),_useState2=_slicedToArray(_useState,2),rightImg=_useState2[0],setRightImg=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isConfigError=_useState4[0],setIsConfigError=_useState4[1];var _useState5=useState({fileInfo:fileInfo,tools:tools,tagList:tagList,attribute:attribute,textConfig:textConfig,commonAttributeConfigurable:commonAttributeConfigurable}),_useState6=_slicedToArray(_useState5,2),confitState=_useState6[0],setConfigState=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),force=_useState8[0],forceSet=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),fileList=_useState10[0],setFileList=_useState10[1];useEffect(function(){// 初始化配置防抖方法\nvar throttle=function throttle(fun,time){var timmer;var returnFunction=function returnFunction(){if(timmer){clearTimeout(timmer);}timmer=setTimeout(function(){fun();},time);};return returnFunction;};// @ts-ignore\nwindow.throttle=throttle;setRightImg(EmptyConfigImg);},[]);// const currentIsVideo = false;\nuseEffect(function(){setConfigState({fileInfo:fileInfo,tools:tools,tagList:tagList,attribute:attribute,textConfig:textConfig,commonAttributeConfigurable:commonAttributeConfigurable});// 配置更新表单刷新\nforceSet(new Date().getTime());},[attribute,tagList,textConfig,tools,fileInfo,commonAttributeConfigurable]);// 加载工具配置信息 和 文件信息\nuseEffect(function(){if(fileInfo.list&&fileInfo.list.length>0){// 配置标注文件 todo=》补充文件拉取接口\nvar fList=fileInfo.list.map(function(item,i){return{id:i+1,url:item.url,result:JSON.stringify([])};});setFileList(fList);}},[fileInfo]);var goBack=function goBack(data){};var doSetImage=function doSetImage(img,isError){setRightImg(img);setIsConfigError(isError);};var extraContent={left:_jsx(\"span\",{className:\"leftTabContent\",children:\"\\u6807\\u6CE8\\u914D\\u7F6E\"}),right:_jsx(ConfigTemplate,{})};return _jsxs(\"div\",{className:\"container\",children:[_jsxs(\"div\",{className:\"headerBox\",children:[_jsx(\"div\",{className:\"stepBox\",children:_jsxs(Steps,{size:\"small\",current:2,children:[_jsx(Step,{title:\"\\u57FA\\u7840\\u914D\\u7F6E\"}),_jsx(Step,{title:\"\\u6570\\u636E\\u5BFC\\u5165\"}),_jsx(Step,{title:\"\\u6807\\u6CE8\\u914D\\u7F6E\"})]})}),_jsxs(\"div\",{className:\"submitBox\",children:[_jsx(Button,{children:\"\\u53D6\\u6D88\"}),_jsx(Button,{type:\"primary\",onClick:function onClick(e){e.stopPropagation();},children:\"\\u5B8C\\u6210\"})]})]}),_jsxs(\"div\",{className:\"configBox\",children:[_jsx(\"div\",{className:\"leftSider\",id:\"lefeSiderId\",children:_jsxs(Tabs,{defaultActiveKey:\"1\",tabBarExtraContent:extraContent,type:\"card\",onChange:function onChange(e){forceSet(new Date().getTime());},children:[_jsx(Tabs.TabPane,{tab:\"YAML\",children:_jsx(\"div\",{className:\"leftPane\",children:_jsx(YamlConfig,{toolsConfigState:confitState,doSetImg:doSetImage},force)})},\"1\"),_jsx(Tabs.TabPane,{tab:\"\\u53EF\\u89C6\\u5316\",forceRender:true,children:_jsx(\"div\",{className:\"leftPane\",children:_jsx(FormConfig,{},force)})},\"2\")]})}),_jsx(\"div\",{className:\"rightSider\",children:(fileList&&fileList.length>0&&tools&&tools.length>0||!rightImg)&&!isConfigError?_jsxs(_Fragment,{children:[_jsx(\"div\",{className:\"rightHeader\",children:_jsx(\"span\",{className:\"leftSpan\",children:\"\\u6807\\u6CE8\\u9884\\u89C8\"})}),_jsx(\"div\",{className:\"rightContent\",children:_jsx(AnnotationOperation,{attributeList:commonAttributeConfigurable?attribute:[],tagConfigList:tagList,imgList:fileList,textConfig:textConfig,goBack:goBack,toolsBasicConfig:tools})})]}):_jsx(\"div\",{className:\"notMatchBox\",children:_jsx(\"img\",{alt:\"not match config\",src:rightImg})})})]})]});};export default AnnotationConfig;","map":null,"metadata":{},"sourceType":"module"}