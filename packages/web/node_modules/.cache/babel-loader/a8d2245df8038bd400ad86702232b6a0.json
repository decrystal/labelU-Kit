{"ast":null,"code":"import _slicedToArray from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport m, { useState as S, useRef as g, useImperativeHandle as z, useEffect as u } from \"react\";\nimport { ViewOperation as E, ImgUtils as C } from \"@label-u/annotation\";\nimport { Spin as L } from \"antd/es\";\nvar R = Object.defineProperty,\n  _ = Object.getOwnPropertySymbols,\n  A = Object.prototype.hasOwnProperty,\n  V = Object.prototype.propertyIsEnumerable,\n  h = function h(o, t, e) {\n    return t in o ? R(o, t, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: e\n    }) : o[t] = e;\n  },\n  w = function w(o, t) {\n    for (var e in t || (t = {})) A.call(t, e) && h(o, e, t[e]);\n    if (_) {\n      var _iterator = _createForOfIteratorHelper(_(t)),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var e = _step.value;\n          V.call(t, e) && h(o, e, t[e]);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    return o;\n  };\nvar Z = {\n    width: 1280,\n    height: 720\n  },\n  j = function j(o, t) {\n    var _o$size = o.size,\n      e = _o$size === void 0 ? Z : _o$size,\n      p = o.src,\n      _o$annotations = o.annotations,\n      s = _o$annotations === void 0 ? [] : _o$annotations,\n      _o$style = o.style,\n      y = _o$style === void 0 ? {\n        stroke: \"blue\",\n        thickness: 3\n      } : _o$style,\n      c = o.zoomChange,\n      _o$backgroundStyle = o.backgroundStyle,\n      O = _o$backgroundStyle === void 0 ? {} : _o$backgroundStyle,\n      d = o.onChange,\n      _o$showLoading = o.showLoading,\n      I = _o$showLoading === void 0 ? !1 : _o$showLoading,\n      _S = S(!1),\n      _S2 = _slicedToArray(_S, 2),\n      b = _S2[0],\n      f = _S2[1],\n      v = g(null),\n      n = g();\n    z(t, function () {\n      var r = n.current;\n      return r ? {\n        zoomIn: function zoomIn() {\n          return r.zoomChanged(!0);\n        },\n        zoomOut: function zoomOut() {\n          return r.zoomChanged(!1);\n        },\n        initImgPos: function initImgPos() {\n          return r.initImgPos();\n        },\n        toolInstance: r\n      } : {};\n    }, [n.current]), u(function () {\n      return v.current && (n.current = new E({\n        isShowOrder: !1,\n        container: v.current,\n        size: e,\n        style: y,\n        annotations: s,\n        config: {}\n      }), n.current.init()), function () {\n        var r;\n        (r = n.current) == null || r.destroy();\n      };\n    }, []), u(function () {\n      var r;\n      n.current && (f(!0), (r = n.current) == null || r.setLoading(!0), C.load(p).then(function (i) {\n        var a, l;\n        (a = n.current) == null || a.setLoading(!1), f(!1), (l = n.current) == null || l.setImgNode(i);\n      }).catch(function () {\n        var i;\n        (i = n.current) == null || i.setLoading(!1), f(!1);\n      }));\n    }, [p]), u(function () {\n      n.current && n.current.updateData(s);\n    }, [s]), u(function () {\n      var r = n.current;\n      (r == null ? void 0 : r.setSize) && r.setSize(e);\n    }, [e == null ? void 0 : e.width, e == null ? void 0 : e.height]), u(function () {\n      var r, i;\n      return n.current && ((r = n.current) == null || r.on(\"onChange\", function () {\n        for (var _len = arguments.length, a = new Array(_len), _key = 0; _key < _len; _key++) {\n          a[_key] = arguments[_key];\n        }\n        d == null || d.apply(null, a);\n      }), (i = n.current) == null || i.on(\"renderZoom\", function (a) {\n        c && c(a);\n      })), function () {\n        var a, l;\n        (a = n.current) == null || a.unbindAll(\"onChange\"), (l = n.current) == null || l.unbindAll(\"renderZoom\");\n      };\n    }, [c, d]);\n    var P = /*#__PURE__*/m.createElement(\"div\", {\n      ref: v,\n      style: w(w({\n        position: \"relative\"\n      }, e), O)\n    });\n    return /*#__PURE__*/m.createElement(L, {\n      spinning: I || b,\n      delay: 300\n    }, P);\n  };\nvar x = /*#__PURE__*/m.forwardRef(j);\nexport { x as default };","map":null,"metadata":{},"sourceType":"module"}