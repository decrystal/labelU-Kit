{"ast":null,"code":"import _objectSpread from\"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState}from'react';import RectConfigForm from'./templates/rectConfigForm';import LineConfigForm from'./templates/lineConfigForm';import PointConfigForm from'./templates/pointConfigForm';import TagConfigForm from'./templates/tagConfigForm';import TextConfigForm from'./templates/textConfigForm';import PolygonConfigForm from'./templates/polygonConfigForm';import'./formEngine.less';// import { toolnames, types,toolnameT } from './constants';\nimport{EToolName}from'@label-u/annotation';import{useDispatch,useSelector}from'react-redux';import{updateTagConfigList,updateTextConfig,updateToolsConfig}from'../../../stores/toolConfig.store';import{Popconfirm}from'antd';// import Dynamic from 'components/basic/dynamic';\nimport{jsx as _jsx}from\"@emotion/react/jsx-runtime\";var FormEngine=function FormEngine(props){var _useSelector=useSelector(function(state){return state.toolsConfig;}),tagList=_useSelector.tagList,textConfig=_useSelector.textConfig,tools=_useSelector.tools;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),confirmLoading=_useState4[0],setConfirmLoading=_useState4[1];var ConfigTool=useMemo(function(){if(props.toolname){if(props.toolname===EToolName.Rect){// const result = await new Promise(async (resolve, reject) => {\n//   const { default: graph } = await import('./templates/rectConfigForm');\n//   resolve(graph);\n// });\n// return result;\n// return Dynamic(() => import('./templates/rectConfigForm'));\nreturn RectConfigForm;}if(props.toolname===EToolName.Point){return PointConfigForm;}if(props.toolname===EToolName.Line){return LineConfigForm;}if(props.toolname===EToolName.Polygon){return PolygonConfigForm;}if(props.toolname===EToolName.Tag){return TagConfigForm;}if(props.toolname===EToolName.Text){return TextConfigForm;}}return null;},[props.toolname]);// 删除工具\nvar deleteTool=function deleteTool(toolName){if(toolName===EToolName.Text){dispatch(updateTextConfig([]));}else if(toolName===EToolName.Tag){dispatch(updateTagConfigList([]));}var newTools=tools.filter(function(tool){return tool.tool!==toolName;});dispatch(updateToolsConfig(newTools));};var showPopconfirm=function showPopconfirm(){setOpen(true);};var handleOk=function handleOk(){setConfirmLoading(true);setTimeout(function(){setOpen(false);setConfirmLoading(false);},2000);deleteTool(props.toolname);};var handleCancel=function handleCancel(){setOpen(false);};return _jsx(\"div\",{children:ConfigTool&&_jsx(ConfigTool,_objectSpread(_objectSpread({tagList:tagList,textConfig:textConfig,name:props.toolname},props.config),{},{children:_jsx(Popconfirm,{title:\"\\u60A8\\u786E\\u5B9A\\u8981\\u5220\\u9664\\u8BE5\\u5DE5\\u5177\\u5417\\uFF1F\",open:open,okText:\"\\u786E\\u8BA4\",cancelText:\"\\u53D6\\u6D88\",onConfirm:handleOk,okButtonProps:{loading:confirmLoading},onCancel:handleCancel,children:_jsx(\"span\",{onClick:showPopconfirm,className:\"deleteTab\",children:\"\\u5220\\u9664\\u5DE5\\u5177\"})})}))});};export default FormEngine;","map":null,"metadata":{},"sourceType":"module"}