{"ast":null,"code":"ace.define(\"ace/ext/spellcheck\", [\"require\", \"exports\", \"module\", \"ace/lib/event\", \"ace/editor\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var event = require(\"../lib/event\");\n  exports.contextMenuHandler = function (e) {\n    var host = e.target;\n    var text = host.textInput.getElement();\n    if (!host.selection.isEmpty()) return;\n    var c = host.getCursorPosition();\n    var r = host.session.getWordRange(c.row, c.column);\n    var w = host.session.getTextRange(r);\n    host.session.tokenRe.lastIndex = 0;\n    if (!host.session.tokenRe.test(w)) return;\n    var PLACEHOLDER = \"\\x01\\x01\";\n    var value = w + \" \" + PLACEHOLDER;\n    text.value = value;\n    text.setSelectionRange(w.length, w.length + 1);\n    text.setSelectionRange(0, 0);\n    text.setSelectionRange(0, w.length);\n    var afterKeydown = false;\n    event.addListener(text, \"keydown\", function onKeydown() {\n      event.removeListener(text, \"keydown\", onKeydown);\n      afterKeydown = true;\n    });\n    host.textInput.setInputHandler(function (newVal) {\n      if (newVal == value) return '';\n      if (newVal.lastIndexOf(value, 0) === 0) return newVal.slice(value.length);\n      if (newVal.substr(text.selectionEnd) == value) return newVal.slice(0, -value.length);\n      if (newVal.slice(-2) == PLACEHOLDER) {\n        var val = newVal.slice(0, -2);\n        if (val.slice(-1) == \" \") {\n          if (afterKeydown) return val.substring(0, text.selectionEnd);\n          val = val.slice(0, -1);\n          host.session.replace(r, val);\n          return \"\";\n        }\n      }\n      return newVal;\n    });\n  };\n  var Editor = require(\"../editor\").Editor;\n  require(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    spellcheck: {\n      set: function set(val) {\n        var text = this.textInput.getElement();\n        text.spellcheck = !!val;\n        if (!val) this.removeListener(\"nativecontextmenu\", exports.contextMenuHandler);else this.on(\"nativecontextmenu\", exports.contextMenuHandler);\n      },\n      value: true\n    }\n  });\n});\n(function () {\n  ace.require([\"ace/ext/spellcheck\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":null,"metadata":{},"sourceType":"script"}