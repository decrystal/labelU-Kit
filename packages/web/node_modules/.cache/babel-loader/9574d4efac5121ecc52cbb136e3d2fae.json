{"ast":null,"code":"import _slicedToArray from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport x from \"./App.js\";\nexport { default as AnnotationView } from \"./components/AnnotationView/index.js\";\nimport { i18n as N } from \"@label-u/utils\";\nexport { i18n } from \"@label-u/utils\";\nimport n, { useState as S, useImperativeHandle as y } from \"react\";\nimport { I18nextProvider as A } from \"react-i18next\";\nimport { Provider as I } from \"react-redux\";\nimport T from \"./configureStore.js\";\nimport { PageBackward as b, PageForward as R, PageJump as E, ChangeSave as P } from \"./store/annotation/actionCreators.js\";\nexport { VideoTagTool } from \"./components/videoPlayer/TagToolInstanceAdaptorI18nProvider.js\";\nimport { toolList as V } from \"./views/MainView/toolHeader/ToolOperation/index.js\";\nexport { default as StepUtils } from \"./utils/StepUtils.js\";\nvar J = Object.defineProperty,\n  D = Object.defineProperties,\n  L = Object.getOwnPropertyDescriptors,\n  w = Object.getOwnPropertySymbols,\n  B = Object.prototype.hasOwnProperty,\n  C = Object.prototype.propertyIsEnumerable,\n  O = function O(r, e, t) {\n    return e in r ? J(r, e, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: t\n    }) : r[e] = t;\n  },\n  F = function F(r, e) {\n    for (var t in e || (e = {})) B.call(e, t) && O(r, t, e[t]);\n    if (w) {\n      var _iterator = _createForOfIteratorHelper(w(e)),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var t = _step.value;\n          C.call(e, t) && O(r, t, e[t]);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    return r;\n  },\n  H = function H(r, e) {\n    return D(r, L(e));\n  };\nvar i = T(),\n  U = function U(r, e) {\n    var _S = S(),\n      _S2 = _slicedToArray(_S, 2),\n      t = _S2[0],\n      h = _S2[1];\n    return y(e, function () {\n      return {\n        toolInstance: t,\n        pageBackwardActions: function pageBackwardActions() {\n          return i.dispatch(b());\n        },\n        pageForwardActions: function pageForwardActions() {\n          return i.dispatch(R());\n        },\n        pageJump: function pageJump(s) {\n          var p = ~~s - 1;\n          i.dispatch(E(p));\n        },\n        saveData: function saveData() {\n          i.dispatch(P);\n        },\n        getResult: function getResult() {\n          var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          return i.dispatch(P), new Promise(function (p, W) {\n            setTimeout(function () {\n              var u, d, c, f, g;\n              var j = (u = i.getState()) == null ? void 0 : u.annotation.imgList[s],\n                o = JSON.parse(j.result),\n                v = [];\n              var _iterator2 = _createForOfIteratorHelper(V),\n                _step2;\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var a = _step2.value;\n                  var m = [];\n                  if (a.toolName !== \"tagTool\" && o[a.toolName] && ((d = o[a.toolName]) == null ? void 0 : d.result) && ((f = (c = o[a.toolName]) == null ? void 0 : c.result) == null ? void 0 : f.length) > 0) for (var l = 0; l < o[a.toolName].result.length; l++) v.indexOf(o[a.toolName].result[l].id) < 0 && (v.push(o[a.toolName].result[l].id), m.push(o[a.toolName].result[l]));\n                  m.length > 0 && (o[a.toolName].result = m);\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n              var _ = (g = i.getState()) == null ? void 0 : g.annotation.imgList;\n              _[s].result = JSON.stringify(o), p(_);\n            }, 200);\n          });\n        }\n      };\n    }, [t]), /*#__PURE__*/n.createElement(I, {\n      store: i\n    }, /*#__PURE__*/n.createElement(A, {\n      i18n: N\n    }, /*#__PURE__*/n.createElement(x, H(F({}, r), {\n      setToolInstance: h\n    }))));\n  };\nvar M = /*#__PURE__*/n.forwardRef(U);\nexport { M as default, i as store };","map":null,"metadata":{},"sourceType":"module"}