{"ast":null,"code":"import _toConsumableArray from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/decrytal-ade/project/work/shlab/labelU-Kit/packages/web/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { AttributeUtils as E } from \"@label-u/annotation\";\nimport n, { useState as m, useEffect as p, useCallback as T } from \"react\";\nimport { connect as j } from \"react-redux\";\nimport { Menu as M, Button as R, Dropdown as $, Space as W } from \"antd\";\nimport H from \"classnames\";\nimport U from \"../../../assets/toolStyle/dropdowm.svg.js\";\nimport V from \"../../../assets/toolStyle/dropdowmA.svg.js\";\nvar q = Object.defineProperty,\n  x = Object.getOwnPropertySymbols,\n  z = Object.prototype.hasOwnProperty,\n  G = Object.prototype.propertyIsEnumerable,\n  I = function I(e, a, i) {\n    return a in e ? q(e, a, {\n      enumerable: !0,\n      configurable: !0,\n      writable: !0,\n      value: i\n    }) : e[a] = i;\n  },\n  J = function J(e, a) {\n    for (var i in a || (a = {})) z.call(a, i) && I(e, i, a[i]);\n    if (x) {\n      var _iterator = _createForOfIteratorHelper(x(a)),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var i = _step.value;\n          G.call(a, i) && I(e, i, a[i]);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    return e;\n  };\nvar K = function K(e) {\n    var _m = m(0),\n      _m2 = _slicedToArray(_m, 2),\n      a = _m2[0],\n      i = _m2[1],\n      g = e.attributeList,\n      b = e.toolsBasicConfig,\n      k = e.currentToolName,\n      u = e.toolInstance,\n      f = e.copytoolInstance,\n      C = e.toolStyle,\n      _m3 = m([]),\n      _m4 = _slicedToArray(_m3, 2),\n      r = _m4[0],\n      _ = _m4[1],\n      _m5 = m(0),\n      _m6 = _slicedToArray(_m5, 2),\n      h = _m6[0],\n      B = _m6[1],\n      _m7 = m(0),\n      _m8 = _slicedToArray(_m7, 2),\n      v = _m8[0],\n      N = _m8[1],\n      _m9 = m(),\n      _m10 = _slicedToArray(_m9, 2),\n      y = _m10[0],\n      A = _m10[1],\n      _m11 = m(!1),\n      _m12 = _slicedToArray(_m11, 2),\n      O = _m12[0],\n      w = _m12[1],\n      _m13 = m([]),\n      _m14 = _slicedToArray(_m13, 2),\n      d = _m14[0],\n      D = _m14[1];\n    p(function () {\n      f && (f == null ? void 0 : f.defaultAttribute) && A(f == null ? void 0 : f.defaultAttribute);\n    }, [f]), p(function () {\n      var t;\n      var o = (t = document.getElementById(\"toolContainer\")) == null ? void 0 : t.offsetWidth;\n      B(o - 30);\n    }, [g, e.imgListCollapse]), p(function () {\n      if (h > 0 && r && r.length > 0) {\n        var o = document.createElement(\"canvas\").getContext(\"2d\");\n        o.font = \"16px\";\n        var l = 0,\n          s = 0;\n        for (var c = 0; c < r.length && (s++, l + 200 < h); c++) {\n          var L = o == null ? void 0 : o.measureText(r[c].key + \" \" + c + 1);\n          r[c].key.length > 6 && (L = o == null ? void 0 : o.measureText(r[c].key.substring(0, 6) + \"... \" + c + 1)), l += Number(L == null ? void 0 : L.width) * 1.38 + 26 + 8 + 5;\n        }\n        N(s);\n      }\n    }, [h, r]);\n    var P = /*#__PURE__*/n.createElement(\"img\", {\n        style: {\n          width: 14,\n          marginLeft: -4,\n          marginBottom: 3\n        },\n        src: U\n      }),\n      F = /*#__PURE__*/n.createElement(\"img\", {\n        style: {\n          width: 14,\n          marginLeft: -4,\n          marginBottom: 3\n        },\n        src: V\n      }),\n      S = T(function () {\n        if (r.length >= v) {\n          var t = r.slice(v).map(function (o, l) {\n            return {\n              label: /*#__PURE__*/n.createElement(\"a\", {\n                className: H({\n                  chooseAttribute: o.key === y\n                }),\n                onClick: function onClick(s) {\n                  s.stopPropagation(), A(o.key), u.setDefaultAttribute(o.value), i(function (c) {\n                    return c + 1;\n                  });\n                }\n              }, /*#__PURE__*/n.createElement(\"div\", {\n                className: \"circle\",\n                style: {\n                  backgroundColor: C.attributeColor[E.getAttributeIndex(o.key, d != null ? d : []) + 1].valid.stroke,\n                  marginRight: 5\n                }\n              }), /*#__PURE__*/n.createElement(\"span\", {\n                className: \"attributeName\"\n              }, o.value)),\n              key: o.key\n            };\n          });\n          return /*#__PURE__*/n.createElement(M, {\n            items: t\n          });\n        } else return /*#__PURE__*/n.createElement(\"div\", null);\n      }, [v, r, u, y]);\n    return p(function () {\n      var t = [],\n        o = [];\n      k && b && b.length > 0 ? (t = b.filter(function (l, s) {\n        return l.tool === k;\n      }), (t == null ? void 0 : t[0].config) && Object.keys(t == null ? void 0 : t[0].config).indexOf(\"attributeList\") > 0 && (o = g.concat(t == null ? void 0 : t[0].config.attributeList))) : o = g, _(o);\n    }, [g, b, k]), p(function () {\n      var t, o;\n      if (u) {\n        var l = [];\n        if (e.attributeList && e.attributeList.length > 0 && (l = [].concat(_toConsumableArray(l), _toConsumableArray(e.attributeList))), e.toolsBasicConfig && e.toolsBasicConfig.length > 0) for (var s = 0; s < e.toolsBasicConfig.length; s++) ((t = e.toolsBasicConfig[s].config) == null ? void 0 : t.attributeList) && (l = [].concat(_toConsumableArray(l), _toConsumableArray((o = e.toolsBasicConfig[s].config) == null ? void 0 : o.attributeList)));\n        u == null || u.setAllAttributes(l), D(l);\n      }\n    }, [k, u == null ? void 0 : u.isShowOrder, b, g]), /*#__PURE__*/n.createElement(\"div\", {\n      className: \"attributeBox\",\n      key: y\n    }, r && r.length > 0 && r.map(function (t, o) {\n      var l = /*#__PURE__*/n.createElement(R, {\n        onClick: function onClick(s) {\n          s.stopPropagation(), A(t.key), u.setDefaultAttribute(t.value), i(function (c) {\n            return c + 1;\n          });\n        },\n        style: {\n          border: \"0px\",\n          borderRadius: \"4px\",\n          padding: \"1px 8px\",\n          backgroundColor: t.key === y ? C.attributeColor[E.getAttributeIndex(t.key, d != null ? d : []) + 1].valid.stroke : \"#FFFFFF\",\n          color: t.key === y ? \"#ffffff\" : \"\"\n        },\n        key: t.key\n      }, /*#__PURE__*/n.createElement(\"div\", {\n        className: \"circle\",\n        style: {\n          backgroundColor: C.attributeColor[E.getAttributeIndex(t.key, d != null ? d : []) + 1].valid.stroke,\n          marginRight: 5\n        }\n      }), /*#__PURE__*/n.createElement(\"span\", {\n        title: t.key,\n        className: \"attributeName\"\n      }, \"\".concat(t.key, \" \").concat(o <= 8 ? o + 1 : \"\")));\n      return o < v ? l : /*#__PURE__*/n.createElement(\"div\", {\n        key: o\n      });\n    }), v < r.length && /*#__PURE__*/n.createElement($, {\n      overlay: S(),\n      trigger: [\"click\"]\n    }, /*#__PURE__*/n.createElement(\"a\", {\n      onMouseEnter: function onMouseEnter(t) {\n        t.preventDefault(), w(!0);\n      },\n      onMouseLeave: function onMouseLeave(t) {\n        t.preventDefault(), w(!1);\n      },\n      onClick: function onClick(t) {\n        return t.preventDefault();\n      },\n      className: \"dropdowm-a\"\n    }, /*#__PURE__*/n.createElement(W, {\n      style: {\n        marginLeft: \"10px\",\n        display: \"flex\",\n        alignItems: \"center\"\n      }\n    }, \"\\u66F4\\u591A\", O ? F : P))));\n  },\n  Q = function Q(e) {\n    return {\n      copytoolInstance: J({}, e.annotation.toolInstance),\n      toolInstance: e.annotation.toolInstance,\n      attributeList: e.annotation.attributeList,\n      toolsBasicConfig: e.annotation.toolsBasicConfig,\n      currentToolName: e.annotation.currentToolName,\n      imgListCollapse: e.toolStyle.imgListCollapse,\n      toolStyle: e.toolStyle\n    };\n  };\nvar X = j(Q)(K);\nexport { X as default };","map":null,"metadata":{},"sourceType":"module"}